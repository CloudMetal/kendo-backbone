// Kendo-Backbone
// --------------
// v0.0.3
//
// Copyright (c)2013 Telerik. All Rights Reserved.
// Distributed under Apache 2.0 license
//
// http://kendoui.com

(function(t,o){"use strict";o.Backbone=o.Backbone||{},o.Backbone.factory=function(){function t(o,e,n){return(t[n=e?-~e.length:1]||(t[n]=Function("a,b,c","return new a("+Array(n).join(",b[c++]").slice(1)+")")))(o,e,0)}var o={types:{},register:function(t,o){this.types[t]=o},build:function(o,e){var e=Array.prototype.splice.call(arguments,1);return t(this.types[o],e)}};return o}(),function(){function t(t,o){return e.define({fields:o,init:function(o){o instanceof t||(o=new t(o)),e.fn.init.call(this,o.toJSON()),this.backbone=o},set:function(t,o){e.fn.set.call(this,t,o),this.backbone.set(t,o)}})}var e=o.data.Model;o.backboneModel=t}(),function(){function t(t){return e.extend({init:function(o){e.fn.init.call(this,o.models,t),this.collection=o},splice:function(){var t,e,n;t=Array.prototype.slice.call(arguments,2);var a=o.data.ObservableArray.fn.splice.apply(this,arguments);if(a.length)for(e=0,n=a.length;n>e;e++)this.collection.remove(a[e].backbone);if(t.length)for(e=0,n=t.length;n>e;e++)this.collection.unshift(t[e].backbone);return a}})}var e=(o.data.Model,o.data.ObservableArray);o.backboneCollection=t}(),o.Backbone.factory.register("BackboneTransport",function(){function t(t){this.colWrap=t}return _.extend(t.prototype,{create:function(t){var o=t.data;this.colWrap.add(o),t.success(o)},read:function(t){t.success(this.colWrap.collection.toJSON())},update:function(t){var o=this.colWrap.collection.get(t.data.id);o.set(t.data),t.success(t.data)},destroy:function(t){var o=this.colWrap.collection.get(t.data.id);this.colWrap.collection.remove(o),t.success(t.data)}}),t}()),o.Backbone.factory.register("CollectionWrapper",function(){function t(t,o){this.collection=t,this.dataSource=o,this.listenTo(this.collection,"add",this._addToDataSource)}return _.extend(t.prototype,Backbone.Events,{add:function(){var t=Array.prototype.slice.call(arguments);this.addFromCol||(this.addFromDS=!0,this.collection.add.apply(this.collection,t),this.addFromDS=!1)},_addToDataSource:function(t){if(!this.addFromDS){this.addFromCol=!0;var o=t.toJSON();this.dataSource.add(o),this.addFromCol=!1}}}),t}()),o.Backbone.DataSource=function(t,o,e){function n(t,o){return e.defaults(t,{schema:{}}),e.defaults(t.schema,{model:{}}),e.defaults(t.schema.model,{id:a(o).model.prototype.idAttribute||"id"}),t}function a(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__||t.constructor.prototype}var c=o.data.DataSource.extend({init:function(t){var a=t.collection,c=o.Backbone.factory.build("CollectionWrapper",a,this),i=o.Backbone.factory.build("BackboneTransport",c);e.defaults(t,{transport:i}),t=n(t,a),o.data.DataSource.prototype.init.call(this,t)}});return c}($,o,_)})(this,kendo);
//@ sourceMappingURL=kendo.backbone.map