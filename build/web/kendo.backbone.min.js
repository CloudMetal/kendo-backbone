// Kendo-Backbone
// --------------
// v0.0.4
//
// Copyright (c)2013 Telerik. All Rights Reserved.
// Distributed under Apache 2.0 license
//
// http://kendoui.com

(function(t,o){"use strict";o.Backbone=o.Backbone||{},function(){function t(t,o){return e.define({fields:o,init:function(o){o instanceof t||(o=new t(o)),e.fn.init.call(this,o.toJSON()),this.backbone=o},set:function(t,o){e.fn.set.call(this,t,o),this.backbone.set(t,o)}})}var e=o.data.Model;o.backboneModel=t}(),function(){function t(t){return e.extend({init:function(o){e.fn.init.call(this,o.models,t),this.collection=o},splice:function(){var t,e,a;t=Array.prototype.slice.call(arguments,2);var n=o.data.ObservableArray.fn.splice.apply(this,arguments);if(n.length)for(e=0,a=n.length;a>e;e++)this.collection.remove(n[e].backbone);if(t.length)for(e=0,a=t.length;a>e;e++)this.collection.unshift(t[e].backbone);return n}})}var e=(o.data.Model,o.data.ObservableArray);o.backboneCollection=t}(),o.Backbone.BackboneTransport=function(){function t(t){this.colWrap=t}return _.extend(t.prototype,{create:function(t){var o=t.data;this.colWrap.add(o),t.success(o)},read:function(t){t.success(this.colWrap.collection.toJSON())},update:function(t){var o=this.colWrap.collection.get(t.data.id);o.set(t.data),t.success(t.data)},destroy:function(t){var o=this.colWrap.collection.get(t.data.id);this.colWrap.collection.remove(o),t.success(t.data)}}),t}(),o.Backbone.CollectionAdapter=function(){function t(t,o){this.collection=t,this.dataSource=o,this.listenTo(this.collection,"add",this._addToDataSource),this.listenTo(this.collection,"remove",this._removeFromDataSource),this.listenTo(this.collection,"reset",this._resetDataSource)}return _.extend(t.prototype,Backbone.Events,{add:function(){var t=Array.prototype.slice.call(arguments);this.addFromCol||(this.addFromDS=!0,this.collection.add.apply(this.collection,t),this.addFromDS=!1)},_addToDataSource:function(t){if(!this.addFromDS){this.addFromCol=!0;var o=t.toJSON();this.dataSource.add(o),this.addFromCol=!1}},_removeFromDataSource:function(t){var o=this.dataSource.get(t.id);o&&this.dataSource.remove(o)},_resetDataSource:function(){this.dataSource.read()}}),t}(),o.Backbone.DataSource=function(t,o,e){function a(t,o){return e.defaults(t,{schema:{}}),e.defaults(t.schema,{model:{}}),e.defaults(t.schema.model,{id:n(o).model.prototype.idAttribute||"id"}),t}function n(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__||t.constructor.prototype}var c=o.data.DataSource.extend({init:function(t){var n=t.collection,c=new o.Backbone.CollectionAdapter(n,this),i=new o.Backbone.BackboneTransport(c);e.defaults(t,{transport:i}),t=a(t,n),o.data.DataSource.prototype.init.call(this,t)}});return c}($,o,_)})(this,kendo);
//@ sourceMappingURL=kendo.backbone.map